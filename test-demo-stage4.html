<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSON差异检测与标记功能演示 - 第四阶段</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #1a1a1a;
            color: #fff;
        }
        .demo-section {
            background: #2a2a2a;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
            border: 1px solid #444;
        }
        .demo-json {
            background: #1e1e1e;
            border: 1px solid #444;
            border-radius: 5px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            overflow-x: auto;
            margin: 10px 0;
        }
        .status {
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }
        .success { background: rgba(34, 197, 94, 0.2); border: 1px solid #22c55e; color: #22c55e; }
        .error { background: rgba(239, 68, 68, 0.2); border: 1px solid #ef4444; color: #ef4444; }
        .warning { background: rgba(245, 158, 11, 0.2); border: 1px solid #f59e0b; color: #f59e0b; }
        .info { background: rgba(59, 130, 246, 0.2); border: 1px solid #3b82f6; color: #3b82f6; }
        .purple { background: rgba(147, 51, 234, 0.2); border: 1px solid #9333ea; color: #9333ea; }
        .diff-added { background: rgba(34, 197, 94, 0.2); border: 1px solid #22c55e; color: #22c55e; }
        .diff-removed { background: rgba(239, 68, 68, 0.2); border: 1px solid #ef4444; color: #ef4444; }
        .diff-modified { background: rgba(245, 158, 11, 0.2); border: 1px solid #f59e0b; color: #f59e0b; }
        .diff-type { background: rgba(59, 130, 246, 0.2); border: 1px solid #3b82f6; color: #3b82f6; }
        h1, h2 { color: #60a5fa; }
        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        .comparison h4 {
            margin: 0 0 10px 0;
            color: #f59e0b;
        }
        .diff-stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin: 20px 0;
        }
        .stat-card {
            text-align: center;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid;
        }
        @media (max-width: 768px) {
            .comparison { grid-template-columns: 1fr; }
            .diff-stats { grid-template-columns: repeat(2, 1fr); }
        }
    </style>
</head>
<body>
    <h1>🎨 JSON智能比较工具 - 第四阶段功能演示</h1>
    
    <div class="demo-section">
        <h2>✅ 第四阶段已实现的核心功能</h2>
        <ul>
            <li><strong>🎯 深度差异检测</strong> - 递归比较JSON结构和值</li>
            <li><strong>🟢 新增字段标记</strong> - 绿色标记仅在右侧存在的字段</li>
            <li><strong>🔴 删除字段标记</strong> - 红色标记仅在左侧存在的字段</li>
            <li><strong>🟡 不同字段标记</strong> - 黄色标记字段存在但值或类型不同</li>
            <li><strong>📊 差异统计面板</strong> - 可视化展示各类差异的数量</li>
            <li><strong>✨ 原地标记显示</strong> - 直接在原JSON文本上显示差异，无需单独窗口</li>
            <li><strong>🔍 悬浮详情提示</strong> - 鼠标悬停查看具体的差异信息</li>
            <li><strong>🎨 智能模式切换</strong> - 编辑模式与比较模式的流畅切换</li>
        </ul>
    </div>

    <div class="demo-section">
        <h2>🎯 测试用例1：完整的差异检测演示</h2>
        
        <div class="comparison">
            <div>
                <h4>🔴 JSON A (左侧)</h4>
                <div class="demo-json">{
  "name": "张三",
  "age": 25,
  "isActive": true,
  "skills": ["JavaScript", "React"],
  "address": {
    "city": "北京",
    "district": "海淀区"
  },
  "oldField": "将被删除"
}</div>
            </div>
            
            <div>
                <h4>🟢 JSON B (右侧)</h4>
                <div class="demo-json">{
  "name": "李四",
  "age": "25",
  "isActive": true,
  "skills": ["JavaScript", "Vue", "Python"],
  "address": {
    "city": "上海",
    "province": "上海市"
  },
  "newField": "新增字段"
}</div>
            </div>
        </div>
        
        <h3>检测到的差异类型：</h3>
        
        <div class="diff-stats" style="grid-template-columns: repeat(3, 1fr);">
            <div class="stat-card diff-added">
                <div style="font-size: 24px; font-weight: bold;">2</div>
                <div>新增字段</div>
            </div>
            <div class="stat-card diff-removed">
                <div style="font-size: 24px; font-weight: bold;">1</div>
                <div>删除字段</div>
            </div>
            <div class="stat-card diff-modified">
                <div style="font-size: 24px; font-weight: bold;">4</div>
                <div>不同字段</div>
            </div>
        </div>

        <h3>详细差异分析：</h3>
        <div class="demo-section" style="background: #1e1e1e;">
            <div class="diff-removed" style="margin: 10px 0; padding: 10px; border-radius: 5px;">
                <strong>- oldField</strong><br>
                <small>删除字段: "将被删除"</small>
            </div>
            
            <div class="diff-added" style="margin: 10px 0; padding: 10px; border-radius: 5px;">
                <strong>+ newField</strong><br>
                <small>新增字段: "新增字段"</small>
            </div>
            
            <div class="diff-added" style="margin: 10px 0; padding: 10px; border-radius: 5px;">
                <strong>+ address.province</strong><br>
                <small>新增字段: "上海市"</small>
            </div>
            
            <div class="diff-removed" style="margin: 10px 0; padding: 10px; border-radius: 5px;">
                <strong>- address.district</strong><br>
                <small>删除字段: "海淀区"</small>
            </div>
            
            <div class="diff-modified" style="margin: 10px 0; padding: 10px; border-radius: 5px;">
                <strong>~ name</strong><br>
                <small>值不同: "张三" → "李四"</small>
            </div>
            
            <div class="diff-modified" style="margin: 10px 0; padding: 10px; border-radius: 5px;">
                <strong>~ age</strong><br>
                <small>类型不同: number → string</small>
            </div>
            
            <div class="diff-modified" style="margin: 10px 0; padding: 10px; border-radius: 5px;">
                <strong>~ address.city</strong><br>
                <small>值不同: "北京" → "上海"</small>
            </div>
            
            <div class="diff-modified" style="margin: 10px 0; padding: 10px; border-radius: 5px;">
                <strong>~ skills[1]</strong><br>
                <small>值不同: "React" → "Vue"</small>
            </div>
        </div>
    </div>

    <div class="demo-section">
        <h2>🧠 差异检测算法特色</h2>
        
        <div class="status info">
            <strong>🔍 深度递归比较</strong><br>
            支持无限嵌套的对象和数组结构，确保每个层级的差异都能被准确检测到。
        </div>
        
        <div class="status success">
            <strong>📍 精确路径定位</strong><br>
            使用点分隔符和数组索引清晰显示差异字段的完整路径，如 address.city、skills[1]。
        </div>
        
        <div class="status warning">
            <strong>⚡ 智能类型检测</strong><br>
            区分值改变和类型改变，帮助用户快速识别数据结构问题。
        </div>
        
        <div class="status purple">
            <strong>🎨 视觉化呈现</strong><br>
            使用不同颜色直观展示四种差异类型，配合图标和统计数据提升用户体验。
        </div>
    </div>

    <div class="demo-section">
        <h2>🎯 用户体验亮点</h2>
        <ul>
            <li><strong>📊 统计面板</strong>：一目了然的差异数量统计，快速了解差异概况</li>
            <li><strong>🔍 可展开详情</strong>：点击差异项查看详细的值对比信息</li>
            <li><strong>🎨 颜色编码</strong>：四色标记系统，直观区分不同类型的差异</li>
            <li><strong>📱 响应式设计</strong>：适配移动端的差异显示界面</li>
            <li><strong>⚡ 加载动画</strong>：比较过程中的优雅加载指示器</li>
            <li><strong>🏷️ 路径标签</strong>：清晰的JSON路径显示，便于定位问题</li>
        </ul>
    </div>

    <div class="demo-section">
        <h2>🔧 技术实现亮点</h2>
        
        <h3>1. 递归差异算法</h3>
        <div class="demo-json">// 伪代码示例
function compareObjects(left, right, path = []) {
  // 处理 null 值
  // 检查类型差异
  // 递归处理对象和数组
  // 深度比较所有字段
}</div>
        
        <h3>2. 智能路径生成</h3>
        <div class="demo-json">// 路径示例
root → user.address.city
root → items[0].name
root → config.database.settings[2]</div>
        
        <h3>3. 类型权重系统</h3>
        <div class="demo-json">// 类型优先级
null(0) → boolean(1) → number(2) → 
string(3) → array(4) → object(5)</div>
    </div>

    <div class="demo-section">
        <h2>🎯 解决的核心痛点</h2>
        <div class="status success">
            <strong>✅ 痛点解决：差异标记没有颜色说明，无法快速识别差异类型</strong><br>
            通过四色标记系统和详细的差异统计，用户可以快速理解JSON之间的所有差异，大幅提升比较效率。
        </div>
    </div>

    <div class="demo-section">
        <h2>🔜 下一阶段预告</h2>
        <p><strong>第五阶段 - 用户体验优化</strong></p>
        <ul>
            <li>🎬 流畅的动画效果和过渡</li>
            <li>⌨️ 快捷键支持 (Ctrl+K格式化等)</li>
            <li>📤 导出功能 (差异报告、JSON文件)</li>
            <li>📋 一键复制功能增强</li>
            <li>🔗 URL参数支持，便于分享</li>
            <li>🌙 深色/浅色主题切换</li>
        </ul>
    </div>

    <div style="text-align: center; margin-top: 40px; color: #888;">
        <p>🚀 访问 <strong>http://localhost:3000</strong> 体验完整的差异检测功能</p>
        <p>💡 尝试粘贴不同的JSON进行比较，观察差异检测的准确性</p>
        <p>🎨 注意观察四种颜色标记：🟢新增 🔴删除 🟡修改 🔵类型变更</p>
    </div>
</body>
</html> 